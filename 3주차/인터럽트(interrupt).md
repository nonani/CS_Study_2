### **μΈν„°λ½νΈ(Interrupt)λ€?**

CPUκ°€ νΉμ • κΈ°λ¥μ„ μν–‰ν•λ” λ„μ¤‘ **μκΈ°μΉ μ•μ€ μƒν™©μ΄ λ°μƒ**ν•λ©΄, ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ‘μ—…μ„ μ¦‰μ‹ μ¤‘λ‹¨ν•κ³  **λ°μƒν• μƒν™©μ„ μ²λ¦¬**ν•΄μ•Ό ν•λ‹¤κ³  CPUμ—κ² μ•λ¦¬λ” λ©”μ»¤λ‹μ¦.

---

## **ν΄λ§(Polling) vs μΈν„°λ½νΈ(Interrupt)**

### **ν΄λ§(Polling) - κµ¬μ‹λ€μ μΈ μ΄λ²¤νΈ κ°μ§€ λ°©μ‹**

- CPUκ°€ λ°λ³µμ μΌλ΅ νΉμ • μ¥μΉλ¥Ό ν™•μΈν•μ—¬ μ΄λ²¤νΈ λ°μƒ μ—¬λ¶€λ¥Ό μ²΄ν¬.
- κµ¬ν„μ΄ λ‹¨μν•λ©° **μ°μ„ μμ„λ¥Ό μ •ν•κΈ° μ‰¬μ›€**.
- ν•μ§€λ§ **μ΄λ²¤νΈκ°€ μ—†μ–΄λ„ κ³„μ† ν™•μΈν•΄μ•Ό ν•λ―€λ΅ CPU μμ›μ΄ λ§μ΄ μ†λ¨λ¨**.

### **μΈν„°λ½νΈ(Interrupt) - ν„λ€μ μΈ μ΄λ²¤νΈ κ°μ§€ λ°©μ‹**

- **μ£Όλ³€ μ¥μΉ**(μ…μ¶λ ¥ μ¥μΉ, νƒ€μ΄λ¨Έ λ“±)μ—μ„ νΉμ • μ΄λ²¤νΈκ°€ λ°μƒν•λ©΄ **μΈν„°λ½νΈ μ‹ νΈλ¥Ό CPUμ— μ „μ†΅**.
- **CPUλ” μ‹¤ν–‰ μ¤‘μΈ μ‘μ—…μ„ μ¤‘λ‹¨**ν•κ³ , μΈν„°λ½νΈ ν•Έλ“¤λ¬λ¥Ό μ‹¤ν–‰ν•μ—¬ μ΄λ²¤νΈλ¥Ό μ²λ¦¬.
- **CPUμ μ§€μ†μ μΈ μ²΄ν¬κ°€ ν•„μ” μ—†μ**, μ΄λ²¤νΈκ°€ λ°μƒν–μ„ λ•λ§ λ°μ‘.
- ν•μ§€λ§ **μΈν„°λ½νΈ μ°μ„ μμ„ λ° λ‹¤μ¤‘ μΈν„°λ½νΈ μ²λ¦¬ μμ„λ¥Ό κ²°μ •ν•΄μ•Ό ν•¨**.

---

## **μΈν„°λ½νΈ λ™μ‘ κ³Όμ •**

1. **μΈν„°λ½νΈ λ°μƒ (Interrupt Request, IRQ)**
    - μ™Έλ¶€ μ…λ ¥(λ²„νΌ λλ¦Ό, μ„Όμ„ κ°’ λ³€ν™”) λλ” λ‚΄λ¶€ μ΄λ²¤νΈ(νƒ€μ΄λ¨Έ λ§λ£, UART λ°μ΄ν„° μμ‹ )λ΅ μΈν•΄ μΈν„°λ½νΈ λ°μƒ.
    - **μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬(Interrupt Controller)**κ°€ μ΄λ¥Ό κ°μ§€ν•κ³  CPUμ— μ•λ¦Ό.
2. **ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ λ…λ Ή μ €μ¥ (Context Saving)**
    - CPUλ” ν„μ¬ μν–‰ μ¤‘μ΄λ **λ…λ Ήμ μƒνƒ(PC, λ μ§€μ¤ν„° κ°’)λ¥Ό μ¤νƒ(Stack)μ— μ €μ¥**.
    - μ΄ν›„ μ›λ μ‘μ—…μΌλ΅ λ³µκ·€ν•  μ μλ„λ΅ μ„¤μ •.
3. **μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”(IVT, Interrupt Vector Table) μ΅°ν**
    - CPUλ” **μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”**μ„ μ°Έμ΅°ν•μ—¬ ν•΄λ‹Ή μΈν„°λ½νΈμ μ²λ¦¬ μ½”λ“(μΈν„°λ½νΈ ν•Έλ“¤λ¬)λ¥Ό μ°Ύμ.
4. **μΈν„°λ½νΈ ν•Έλ“¤λ¬(ISR, Interrupt Service Routine) μ‹¤ν–‰**
    - μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”μ—μ„ μ°Ύμ€ ISRμ„ μ‹¤ν–‰ν•μ—¬ νΉμ • μ΄λ²¤νΈλ¥Ό μ²λ¦¬.
    - μ: λ²„νΌμ΄ λλ¦¬λ©΄ LEDλ¥Ό μΌλ” μ½”λ“ μ‹¤ν–‰.
5. **μΈν„°λ½νΈ μΆ…λ£ λ° μ›λ μ‘μ—… λ³µκ·€ (Context Restoring)**
    - ISR μ‹¤ν–‰μ΄ λλ‚λ©΄ **μ¤νƒμ—μ„ μ΄μ „ μƒνƒλ¥Ό λ³µμ›**ν•μ—¬ μ›λ μ‹¤ν–‰ μ¤‘μ΄λ ν”„λ΅κ·Έλ¨μΌλ΅ λμ•„κ°.

---

## **μΈν„°λ½νΈ λ²΅ν„° (Interrupt Vector)**

- μΈν„°λ½νΈ μ”μ²­μ΄ λ°μƒν–μ„ λ•, CPUλ” **μΈν„°λ½νΈ μ†μ¤κ°€ λ¬΄μ—‡μΈμ§€, ν•Έλ“¤λ¬(ISR)κ°€ μ–΄λ””μ— μλ”μ§€ ν™•μΈ**ν•΄μ•Ό ν•¨.
- **μΈν„°λ½νΈ λ²΅ν„°**λ” **μΈν„°λ½νΈ ν•Έλ“¤λ¬μ μ‹μ‘ μ£Όμ†λ¥Ό μ €μ¥ν•λ” ν…μ΄λΈ”**.
- μ—¬λ¬ κ°μ μΈν„°λ½νΈ λ²΅ν„°λ¥Ό λ¨μ•„ λ‘” **μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”(Interrupt Vector Table, IVT)μ΄** λ©”λ¨λ¦¬μ— μ €μ¥λ¨.

---

## **μΈν„°λ½νΈ ν•Έλ“¤λ¬ (ISR, Interrupt Service Routine)**

- **μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ μ‹¤ν–‰ν•  μ½”λ“**.
- **μ§§κ³  λΉ λ¥΄κ² μ‹¤ν–‰**λμ–΄μ•Ό ν•λ©°, μ‹μ¤ν… μ„±λ¥μ„ μ„ν•΄ μµμ†ν•μ μ½”λ“λ§ ν¬ν•¨ν•΄μ•Ό ν•¨.
- λ°λ“μ‹ **μΆ…λ£(return)**κ°€ ν•„μ”ν•¨ β†’ μΈν„°λ½νΈ μ²λ¦¬κ°€ λλ‚λ©΄ μ›λ μ‹¤ν–‰ν•λ ν”„λ΅κ·Έλ¨μΌλ΅ λ³µκ·€ν•΄μ•Ό ν•¨.

---

## **μΈν„°λ½νΈμ μΆ…λ¥**

### **1. ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ (Hardware Interrupt)**

- **ν•λ“μ›¨μ–΄ μ¥μΉ(ν‚¤λ³΄λ“, λ§μ°μ¤, νƒ€μ΄λ¨Έ, λ„¤νΈμ›ν¬)** μ—μ„ λ°μƒν•λ” μΈν„°λ½νΈ.
- **μ™Έλ¶€ μ¥μΉκ°€ CPUμ— μ‹ νΈλ¥Ό λ³΄λ‚΄ νΉμ • μ‘μ—…μ„ μ”μ²­**.
- **λΉ„λ™κΈ°μ (Asynchronous**μΌλ΅ λ°μƒ β†’ CPUκ°€ μμƒμΉ λ»ν• μκ°„μ—λ„ λ°μƒ κ°€λ¥.

### **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈμ μμ‹**

- **νƒ€μ΄λ¨Έ μΈν„°λ½νΈ** β†’ Context Switching (ν”„λ΅μ„Έμ¤ μ¤μΌ€μ¤„λ§) μ‹ μ‚¬μ©.
- **I/O μΈν„°λ½νΈ** β†’ μ…μ¶λ ¥ μ¥μΉ(λ””μ¤ν¬, λ„¤νΈμ›ν¬ λ“±)κ°€ μ‘μ—… μ™„λ£ μ‹ λ°μƒ.
- **μ „μ› μ΄μƒ μΈν„°λ½νΈ** β†’ μ „μ› κ³µκΈ‰μ΄ κ°‘μ‘μ¤λ½κ² μ¤‘λ‹¨λ  λ•.

---

### **2. μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ (Software Interrupt)**

- **μ†ν”„νΈμ›¨μ–΄μ μΌλ΅ λ°μƒν•λ” μΈν„°λ½νΈ**.
- ν”„λ΅κ·Έλ¨μ΄ μ‹¤ν–‰λλ” λ™μ• CPUμ—κ² νΉμ • μ‘μ—…μ„ μ”μ²­ν•κ±°λ‚ μ¤λ¥κ°€ λ°μƒν•λ©΄ λ°μƒ.

### **μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈμ μμ‹**

### **(1) Trap (Exception) - μμ™Έ μ²λ¦¬**

- **ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘ μμ™Έ(Exception)κ°€ λ°μƒν•μ—¬ CPUκ°€ μ§μ ‘ μ²λ¦¬**.
- μ: **0μΌλ΅ λ‚λ„κΈ°(Divide by Zero), νμ΄μ§€ ν΄νΈ(Page Fault), λ³΄νΈ μ¤λ¥(Segmentation Fault)**

### **(2) SVC μΈν„°λ½νΈ (Supervisor Call Interrupt) - μ΄μμ²΄μ  νΈμ¶**

- **μ΄μμ²΄μ λ¥Ό νΈμ¶ν•μ—¬ μ»¤λ„ λ¨λ“λ΅ μ „ν™ν•  λ• λ°μƒ**.
- **μ‹μ¤ν… μ½(System Call)**μ„ μ΄μ©ν•μ—¬ μ»¤λ„μ ν•¨μλ¥Ό νΈμ¶ν•  μ μμ.

---

## **μ‹μ¤ν… μ½ (System Call)κ³Ό μΈν„°λ½νΈ**

μ΄μμ²΄μ μ—μ„ **μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ μ κΈ°λ¥(νμΌ μ—΄κΈ°, λ©”λ¨λ¦¬ ν• λ‹Ή, ν”„λ΅μ„Έμ¤ μƒμ„± λ“±)μ„ μ”μ²­ν•  λ• μ‚¬μ©**ν•λ” μΈν„°λ½νΈ λ©”μ»¤λ‹μ¦.

### **μ‹μ¤ν… μ½(System Call) λ™μ‘ κ³Όμ •**

1. **μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ‹μ¤ν… μ½μ„ μ‹¤ν–‰** (μ: `open()`, `read()`, `write()`)
2. CPUλ” **μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ(SVC)λ¥Ό λ°μƒμ‹μΌ μ»¤λ„ λ¨λ“λ΅ μ „ν™**.
3. μ΄μμ²΄μ  μ»¤λ„μ€ **ν•΄λ‹Ή μ‹μ¤ν… μ½μ„ μ²λ¦¬**.
4. μ‘μ—…μ΄ λλ‚λ©΄ **μ‚¬μ©μ λ¨λ“λ΅ λ³µκ·€**ν•μ—¬ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰μ„ κ³„μ†ν•¨.

### **μ‹μ¤ν… μ½ μμ‹ (Linux)**

```c
c
λ³µμ‚¬νΈμ§‘
#include <stdio.h>
#include <unistd.h>

int main() {
    write(1, "Hello, World!\n", 14);  // μ‹μ¤ν… μ½μ„ μ‚¬μ©ν•μ—¬ μ¶λ ¥
    return 0;
}

```

- `write()` ν•¨μλ” **μ‹μ¤ν… μ½μ„ ν†µν•΄ μ»¤λ„μ `sys_write` ν•¨μλ¥Ό νΈμ¶**.
- λ‚΄λ¶€μ μΌλ΅ **μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ(INT 0x80, syscall)λ¥Ό λ°μƒμ‹μΌ μ»¤λ„ λ¨λ“λ΅ μ „ν™**.

---

## **κ²°λ΅ **

- **μΈν„°λ½νΈλ” CPUκ°€ μμƒμΉ λ»ν• μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•λ” λ©”μ»¤λ‹μ¦**.
- **ν΄λ§(Polling)λ³΄λ‹¤ CPU λ¦¬μ†μ¤λ¥Ό μ μ•½ν•  μ μμ–΄ ν¨μ¨μ **.
- **μΈν„°λ½νΈλ” ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ(μ™Έλ¶€ μ¥μΉ)μ™€ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ(μμ™Έ, μ‹μ¤ν… μ½)λ΅ λ‚λ‰¨**.
- **μΈν„°λ½νΈ ν•Έλ“¤λ¬(ISR)λ” μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• μ‹¤ν–‰λλ” μ½”λ“**.
- **μ‹μ¤ν… μ½(System Call)μ€ μ΄μμ²΄μ  κΈ°λ¥μ„ μ”μ²­ν•λ” μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ**.
- **μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”(IVT)μ„ ν†µν•΄ μ μ ν• ν•Έλ“¤λ¬κ°€ μ‹¤ν–‰λ¨**.

μΈν„°λ½νΈλ¥Ό μ ν™μ©ν•λ©΄ **CPUκ°€ λ©€ν‹°νƒμ¤ν‚Ήμ„ ν¨κ³Όμ μΌλ΅ μν–‰**ν•  μ μμµλ‹λ‹¤! π€
